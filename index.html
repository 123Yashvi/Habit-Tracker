<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Goal Tracker</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
    }
    header {
      background-color: #4CAF50;
      color: white;
      padding: 1em;
      text-align: center;
    }
    .container {
      padding: 1em;
    }
    .section {
      margin-bottom: 1.5em;
      background: #fff;
      padding: 1em;
      border-radius: 10px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    .section-title {
      margin-bottom: 0.5em;
      font-weight: bold;
    }
    input, select, button {
      padding: 0.5em;
      margin: 0.3em 0;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #45a049;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1em;
    }
    table, th, td {
      border: 1px solid #ddd;
    }
    th, td {
      padding: 0.5em;
      text-align: center;
    }
    .status-green { background-color: #d4edda; }
    .status-orange { background-color: #fff3cd; }
    .status-red { background-color: #f8d7da; }
    .action-btns i {
      margin: 0 0.3em;
      cursor: pointer;
    }
    .export-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 1em;
    }
    .export-btn img {
      width: 150px;
      cursor: pointer;
    }
  </style>
</head>
<body><header>
  <h1>ðŸŽ¯ Smart Goal & Habit Tracker</h1>
</header><div class="container">  <div class="section" id="goal-entry-section" style="background-color: #e8f5e9">
    <div class="section-title">Add a New Goal</div>
    <input type="text" id="goalName" placeholder="Goal Name">
    <select id="goalType" onchange="handleGoalTypeChange()">
      <option value="amount">Target Amount</option>
      <option value="yesno">Yes/No Type</option>
      <option value="time">Time-Based</option>
    </select>
    <input type="number" id="targetAmount" placeholder="Target Amount">
    <input type="text" id="unit" placeholder="Unit (e.g. kg, hours)">
    <input type="date" id="startDate">
    <input type="date" id="endDate">
    <button onclick="saveGoal()">Save Goal</button>
  </div>  <div class="section" id="progress-entry-section" style="background-color: #e3f2fd">
    <div class="section-title">Add Progress</div>
    <select id="goalSelect"></select>
    <input type="date" id="progressDate">
    <input type="text" id="progressAmount" placeholder="Progress / Yes / No / Time">
    <button onclick="addProgress()">Add Progress</button>
  </div>  <div class="section" style="background-color: #fff8e1">
    <div class="section-title">All Goals Summary</div>
    <table id="goalTable">
      <thead>
        <tr>
          <th>Goal</th>
          <th>Type</th>
          <th>Target</th>
          <th>Progress</th>
          <th>% Complete</th>
          <th>Status</th>
          <th>Start Date</th>
          <th>End Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>  <div class="section" style="background-color: #ede7f6">
    <div class="section-title">ðŸ“ˆ Progress Chart</div>
    <canvas id="progressChart"></canvas>
  </div>  <div class="section export-btn">
    <img src="https://www.gstatic.com/images/branding/product/1x/sheets_2020q4_48dp.png" alt="Export to Google Sheets" onclick="exportToGoogleSheets()">
  </div></div><script>
  let goals = JSON.parse(localStorage.getItem('goals') || '[]');
  let progress = JSON.parse(localStorage.getItem('progress') || '[]');

  function handleGoalTypeChange() {
    const type = document.getElementById('goalType').value;
    const targetAmount = document.getElementById('targetAmount');
    const unit = document.getElementById('unit');

    if (type === 'yesno') {
      targetAmount.style.display = 'none';
      unit.style.display = 'none';
    } else {
      targetAmount.style.display = 'inline';
      unit.style.display = 'inline';
    }
  }

  function saveGoal() {
    const goal = {
      name: document.getElementById('goalName').value,
      type: document.getElementById('goalType').value,
      target: document.getElementById('targetAmount').value,
      unit: document.getElementById('unit').value,
      start: document.getElementById('startDate').value,
      end: document.getElementById('endDate').value
    };
    goals.push(goal);
    localStorage.setItem('goals', JSON.stringify(goals));
    populateGoals();
    renderTable();
  }

  function populateGoals() {
    const select = document.getElementById('goalSelect');
    select.innerHTML = '';
    goals.forEach((g, i) => {
      const option = document.createElement('option');
      option.value = i;
      option.textContent = g.name;
      select.appendChild(option);
    });
  }

  function addProgress() {
    const goalIndex = document.getElementById('goalSelect').value;
    const date = document.getElementById('progressDate').value || new Date().toISOString().split('T')[0];
    let amount = document.getElementById('progressAmount').value;
    if (amount.toLowerCase() === 'y') amount = 'Yes';
    if (amount.toLowerCase() === 'n') amount = 'No';

    progress.push({ goalIndex, date, amount, time: new Date().toLocaleTimeString() });
    localStorage.setItem('progress', JSON.stringify(progress));
    renderTable();
    renderChart();
  }

  function renderTable() {
    const tbody = document.querySelector('#goalTable tbody');
    tbody.innerHTML = '';

    goals.forEach((goal, i) => {
      const goalProgress = progress.filter(p => parseInt(p.goalIndex) === i);
      let total = 0;

      if (goal.type === 'amount') {
        total = goalProgress.reduce((sum, p) => sum + parseFloat(p.amount), 0);
      } else if (goal.type === 'yesno') {
        total = goalProgress.filter(p => p.amount === 'Yes').length;
      } else if (goal.type === 'time') {
        total = goalProgress.length;
      }

      const percent = goal.type === 'amount' ? (total / goal.target * 100).toFixed(1) : 'N/A';
      const statusClass = percent >= 80 ? 'status-green' : percent >= 40 ? 'status-orange' : 'status-red';

      const row = document.createElement('tr');
      row.className = statusClass;
      row.innerHTML = `
        <td>${goal.name}</td>
        <td>${goal.type}</td>
        <td>${goal.target || '-'}</td>
        <td>${total} ${goal.unit || ''}</td>
        <td>${percent}</td>
        <td>${statusClass.replace('status-', '')}</td>
        <td>${goal.start}</td>
        <td>${goal.end}</td>
        <td class="action-btns">
          <i class="fas fa-edit"></i>
          <i class="fas fa-trash" onclick="deleteGoal(${i})"></i>
        </td>
      `;
      tbody.appendChild(row);
    });
  }

  function deleteGoal(index) {
    goals.splice(index, 1);
    localStorage.setItem('goals', JSON.stringify(goals));
    progress = progress.filter(p => parseInt(p.goalIndex) !== index);
    localStorage.setItem('progress', JSON.stringify(progress));
    populateGoals();
    renderTable();
  }

  function renderChart() {
    const ctx = document.getElementById('progressChart').getContext('2d');
    const labels = goals.map(g => g.name);
    const data = goals.map((g, i) => {
      const gp = progress.filter(p => parseInt(p.goalIndex) === i);
      if (g.type === 'amount') {
        return gp.reduce((sum, p) => sum + parseFloat(p.amount), 0);
      } else if (g.type === 'yesno') {
        return gp.filter(p => p.amount === 'Yes').length;
      }
      return gp.length;
    });

    new Chart(ctx, {
      type: 'bar',
      data: {
        labels,
        datasets: [{
          label: 'Progress',
          data,
          backgroundColor: '#42a5f5'
        }]
      }
    });
  }

  function exportToGoogleSheets() {
    alert('Google Sheets export is a premium feature or needs integration with Google Apps Script.');
  }

  populateGoals();
  renderTable();
  renderChart();
</script></body>
</html>
